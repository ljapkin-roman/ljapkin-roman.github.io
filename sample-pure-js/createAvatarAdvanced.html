<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=divace-width,initial-scale=1">
    <title></title>
    <style>
    </style>
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../bootstrap/css/createFace.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="../bootstrap/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Dropdown Example
                <span class="caret"></span></button>
              <ul class="dropdown-menu">
                      <li><a href="#">HTML</a></li>
                      <li><a href="#">CSS</a></li>
                      <li><a href="#">JavaScript</a></li>
              </ul>
                            </div>
<div class="container">
    <div class ="row mainBlock">
        <div class="col-sm-5 bord deletePadding">
            <img src="https://api.adorable.io/avatars/face/eyes6/nose2/mouth1/345782" alt="" class="mainAvatar">
        </div>
        <div class="col-sm-7 bord">
            <div class="container-fluid">
                <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-6 cort">
    <div class="dropdown">
          <button class="btn btn-muted dropdown-toggle" type="button" data-toggle="dropdown">Eyes
                <span class="caret"></span></button>
              <ul class="dropdown-menu eyes">
                          <li>eyes1</li>
                          <li>eyes10</li>
                          <li>eyes2</li>
                          <li>eyes3</li>
                          <li>eyes4</li>
                          <li>eyes5</li>
                          <li>eyes6</li>
                          <li>eyes7</li>
                          <li>eyes9</li>
              </ul>
                            </div>
                      </div>
                      <div class="col-sm-6 ">
                          <img src="imgForAvatar/eyes/eyes6.png" alt="" width="100px" height="100px" class="eyes">
                      </div>
                  </div>
              </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-6 cort align-middle">
    <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Nose
                <span class="caret"></span></button>
              <ul class="dropdown-menu nose">
                          <li>nose2</li>
                          <li>nose3</li>
                          <li>nose4</li>
                          <li>nose5</li>
                          <li>nose6</li>
                          <li>nose7</li>
                          <li>nose8</li>
                          <li>nose9</li>
              </ul>
                            </div>
                      </div>
                      <div class="col-sm-6 ">
                          <img src="imgForAvatar/nose/nose2.png" alt="" width="100px" height="100px" class="nose">
                      </div>
                  </div>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-6 cort">
    <div class="dropdown">
          <button class="btn btn-info dropdown-toggle" type="button" data-toggle="dropdown">Mouth
                <span class="caret"></span></button>
              <ul class="dropdown-menu mouth">
                          <li>mouth1</li>
                          <li>mouth3</li>
                          <li>mouth10</li>
                          <li>mouth11</li>
                          <li>mouth5</li>
                          <li>mouth6</li>
                          <li>mouth7</li>
                          <li>mouth9</li>
              </ul>
                            </div>
                      </div>
                      <div class="col-sm-6 ">
                          <img src="imgForAvatar/mouth/mouth1.png" alt="" width="100px" height="100px" class="mouth">
                      </div>
                  </div>
            </div>
            <div class="container-fluid">
                <form>
                    Select your favorite color:
                    <input type="color" name="favcolor">
                </form>
            </div>
        </div>
   </div>
   </div>
</div>
<script type="text/javascript">
    var contentUrl = document.querySelector(".contentUrl");
    let mainAvatar = document.querySelector(".mainAvatar");
    let contentMenuMouth =Array.from(document.querySelectorAll(".mouth li"));
    let contentMenuEyes =Array.from(document.querySelectorAll(".eyes li"));
    let contentMenuNose =Array.from(document.querySelectorAll(".nose li"));
    let sourceImg = document.querySelector("img.srcImg");
    let source = document.querySelector("#source");
    let color = document.querySelector('input[type="color"]');
    color.addEventListener("change", changeColor);
    //source.innerHTML = mainAvatar.attributes['src'].nodeValue;


    function filterKeyWord(data){
        for(var i =0; i<data.length; i++)  {
            if(data[i] == "eyes" || data[i] == "nose" || data[i] == "mouth") {
                return data[i];
            }
        }
    }


    for(var i = 0, len = contentMenuMouth.length; i < len; i++){
        contentMenuMouth[i].addEventListener("mouseover",chooseFeature);
        contentMenuMouth[i].addEventListener("click", getFeature);
    }

for(var i = 0, len = contentMenuEyes.length; i < len; i++){
    contentMenuEyes[i].addEventListener("mouseover",chooseFeature );
        contentMenuEyes[i].addEventListener("click", getFeature);
}

for(var i = 0, len = contentMenuNose.length; i < len; i++){
    contentMenuNose[i].addEventListener("mouseover",chooseFeature );
        contentMenuNose[i].addEventListener("click", getFeature);
}



function chooseFeature(data){
    console.log("choo-choo-choose mathafacker");
	//get  a value from list  of li which is "overed"
        let dataFromList= data.target.firstChild.data;
	// we find out what a element we got
	var featureFace = data.target.parentElement.classList;
    featureFace = filterKeyWord(featureFace);
    console.log("featureFace " + featureFace)
    console.log("class + " + featureFace);
    // get image which show this feature face
    let urlImage = document.querySelector("img." + featureFace);
	// create regular expretion on base name element
	let regularExp = new RegExp( featureFace + "\\d{1,}", "i" );
        var text = urlImage.attributes['src'].nodeValue;
        let output= text.replace(regularExp, dataFromList);
        urlImage.attributes['src'].nodeValue = output; 
}
function getFeature(data){
        let dataFromList= data.target.firstChild.data;
	    var featureFace = data.target.parentElement.classList;
        featureFace = filterKeyWord(featureFace);
        let urlImage = document.querySelector("img." + featureFace);
	    let regularExp = new RegExp( featureFace + "\\d{1,}", "i" );
        let mainAvatar = document.querySelector('.mainAvatar');
        let textAvatar = mainAvatar.attributes['src'].nodeValue;
        mainAvatar.attributes['src'].nodeValue = textAvatar.replace(regularExp,dataFromList);
       source.innerHTML = mainAvatar.attributes['src'].nodeValue
        console.log(mainAvatar.attributes['src'].nodeValue);
}
function changeColor(data) {
    var template = new RegExp("\\w{6}$", "i");
    var valueColor = data.target.value;
    valueColor = valueColor.match(template);
    console.log(valueColor);
    let replace = mainAvatar.attributes['src'].value.replace(template, valueColor[0]);
mainAvatar.attributes['src'].value = replace;
    console.log(mainAvatar.attributes['src'].value)


}
   </script>
</body>
</html>
